---
- name: Common | Updates packages
  sudo: yes
  apt: update_cache=yes upgrade=dist

- name: Common | Make sure essential tools are installed/up-to-date
  sudo: yes
  apt: pkg={{ item }}
  
  with_items:
    - python-yaml 
    - python-jinja2 
    - python-pycurl
    - python-apt
    - ntp
    - htop   
    - iotop
    - git
    - wget     
    - unzip     
    - curl
    - openssl
    - sysstat
    - openvpn
    - network-manager-openvpn-gnome
    - jq
    - iftop
    - bmon
    - sshuttle
    - automake 
    - autogen 
    - shtool 
    - libtool 
    - cmake 
    - unzip 
    - build-essential 
    - libboost-all-dev 
    - g++ 
    - python-dev 
    - autotools-dev 
    - libicu-dev 
    - zlib1g-dev 
    - libssl-dev 
    - libbz2-dev 
    - libsnappy-dev 
    - libgoogle-glog-dev 
    - libgflags-dev 
    - libjansson-dev 
    - libcurl4-openssl-dev 
    - liblzma-dev 
    - libpq-dev 
    - pkg-config

- name: make everyone sudo without password
  lineinfile: "dest=/etc/sudoers state=present line='%sudo ALL=(ALL) NOPASSWD: ALL'"

- name: add /usr/local/lib to LD_LIBRARY_PATH search path
  lineinfile: "dest=/etc/ld.so.conf state=present line='/usr/local/lib'"
  register: ld_so_conf

- name: run ldconfig
  command: ldconfig
  when: ld_so_conf.changed

