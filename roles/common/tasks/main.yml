---
- name: Common | Updates packages
  sudo: yes
  apt: update_cache=yes upgrade=dist

- name: Common | Make sure essential tools are installed/up-to-date
  sudo: yes
  apt: pkg={{ item }}
  
  with_items:
    - python-yaml 
    - python-jinja2 
    - python-pycurl
    - python-apt
    - ntp
    - htop   
    - iotop
    - git
    - wget     
    - unzip     
    - curl
    - openssl
    - sysstat
    - emacs
    - openvpn
    - network-manager-openvpn-gnome
    - jq
    - iftop
    - bmon
    - sshuttle

#does not exist for ubuntu 17
#    - ack-grep


#not for bionic
#- apt_repository: repo='ppa:nilarimogard/webupd8' state=present
#  sudo: yes

#- apt: pkg=launchpad-getkeys
#  sudo: yes

- name: make everyone sudo without password
  lineinfile: "dest=/etc/sudoers state=present line='%sudo ALL=(ALL) NOPASSWD: ALL'"

- name: add /usr/local/lib to LD_LIBRARY_PATH search path
  lineinfile: "dest=/etc/ld.so.conf state=present line='/usr/local/lib'"
  register: ld_so_conf

- name: run ldconfig
  command: ldconfig
  when: ld_so_conf.changed

